package pkg

import java.util.Iterator

class TestContracts {
   public fun testSimpleContract(x: Int?): Int {
      contract {
         returns() implies (x != null)
      }

      if (x == null) {// 13
         throw new IllegalStateException("x is null".toString());
      } else {
         return x;// 14
      }
   }

   public fun testBooleanContract(a: Boolean, b: Boolean): Boolean? {
      contract {
         returns(true) implies (!a && !b)
         returns(null) implies (a && b)
         returns(false) implies ((a && !b || (!a && b)
      }

      return if (a && b) null else a || b;// 24
   }

   public fun testTypeContract(x: Any?): Int {
      contract {
         returns() implies (x is Int)
      }

      if (x !is Integer) {// 31
         throw new IllegalStateException("x is not Int".toString());
      } else {
         return (x as java.lang.Number).intValue();// 32
      }
   }

   public fun testFunctionalContract(f: () -> Int): Int {
      contract {
         callsInPlace(f, InvocationKind.EXACTLY_ONCE)
      }

      return (f.invoke() as java.lang.Number).intValue();// 39
   }

   public fun testFunctionalContract2(f: () -> Int, b: Boolean): Int {
      contract {
         callsInPlace(f, InvocationKind.AT_MOST_ONCE)
      }

      return if (b) (f.invoke() as java.lang.Number).intValue() else 0;// 46
   }

   public fun testFunctionalContract3(f: () -> Int, i: Int): Int {
      contract {
         callsInPlace(f)
      }

      var var3: java.lang.Iterable = (new IntRange(0, i)) as java.lang.Iterable;
      var var4: Int = 0;

      for (Iterator var5 = var3.iterator(); var5.hasNext(); var4 += ((java.lang.Number)f.invoke()).intValue()) {
         var var6: Int = (var5 as IntIterator).nextInt();
      }

      return var4;// 53
   }
}

class 'pkg/TestContracts' {
   method 'testSimpleContract (Ljava/lang/Integer;)I' {
      1      10
      2      10
      9      11
      a      11
      b      11
      c      11
      d      11
      11      11
      12      13
      13      13
      14      13
      15      13
      16      13
   }

   method 'testBooleanContract (ZZ)Ljava/lang/Boolean;' {
      1      24
      2      24
      5      24
      6      24
      9      24
      d      24
      e      24
      11      24
      12      24
      1a      24
      1d      24
   }

   method 'testTypeContract (Ljava/lang/Object;)I' {
      1      32
      5      32
      c      33
      d      33
      e      33
      f      33
      10      33
      14      33
      15      35
      16      35
      17      35
      18      35
      19      35
      1a      35
      1b      35
      1c      35
   }

   method 'testFunctionalContract (Lkotlin/jvm/functions/Function0;)I' {
      7      44
      8      44
      9      44
      a      44
      b      44
      c      44
      d      44
      e      44
      f      44
      10      44
      11      44
      12      44
      13      44
   }

   method 'testFunctionalContract2 (Lkotlin/jvm/functions/Function0;Z)I' {
      7      52
      8      52
      b      52
      c      52
      d      52
      e      52
      f      52
      10      52
      11      52
      12      52
      13      52
      14      52
      15      52
      16      52
      1a      52
      1b      52
   }

   method 'testFunctionalContract3 (Lkotlin/jvm/functions/Function0;I)I' {
      b      60
      c      60
      10      60
      11      60
      12      60
      13      60
      14      61
      15      61
      16      61
      17      63
      18      63
      19      63
      1a      63
      1b      63
      1c      63
      1d      63
      1e      63
      1f      63
      20      63
      21      63
      22      63
      23      63
      24      63
      25      63
      29      64
      2a      64
      2b      64
      2c      64
      2d      64
      2e      64
      2f      64
      30      64
      31      64
      32      64
      3e      63
      3f      63
      40      63
      41      63
      42      63
      43      63
      44      63
      45      63
      46      63
      47      63
      48      63
      49      63
      4e      63
      4f      63
      51      63
      52      63
      56      67
      57      67
      58      67
   }
}

Lines mapping:
13 <-> 11
14 <-> 14
24 <-> 25
31 <-> 33
32 <-> 36
39 <-> 45
46 <-> 53
53 <-> 68
Not mapped:
10
18
28
36
43
50
57
